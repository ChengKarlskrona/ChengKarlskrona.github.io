<!DOCTYPE html>
<html>
    <head>
        <meta name="baidu-site-verification" content="9dtmr2U4H5" />
        <meta name="google-site-verification" content="x6k7knkmpTCLh6kFNs3JZVS6wUmetVakl9PNI3qMT_0" />
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Practice2：Download Scarlet Witch&#39;s Picture From WeHeartit WebSite | Code_Cheng Site</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Today’s topic is download Scarlet Witch’s photo from this website:[http://weheartit.com/allsimpleannie/collections/108140702-elizabeth-olsen], actually this is a albums.">
<meta name="keywords" content="Python,BeautifulSoup,Urllib,Urlretrieve,Download">
<meta property="og:type" content="article">
<meta property="og:title" content="Practice2：Download Scarlet Witch&#39;s Picture From WeHeartit WebSite">
<meta property="og:url" content="http://clovel.cn/2017/03/31/Practice-2_-Download-Scarlett-Pictures-From-WeHeartit-With-Python/index.html">
<meta property="og:site_name" content="Code_Cheng Site">
<meta property="og:description" content="Today’s topic is download Scarlet Witch’s photo from this website:[http://weheartit.com/allsimpleannie/collections/108140702-elizabeth-olsen], actually this is a albums.">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://clovel.cn/images/down_1.png">
<meta property="og:image" content="http://clovel.cn/images/down_2.png">
<meta property="og:image" content="http://clovel.cn/images/down_3.png">
<meta property="og:updated_time" content="2017-09-18T19:49:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Practice2：Download Scarlet Witch&#39;s Picture From WeHeartit WebSite">
<meta name="twitter:description" content="Today’s topic is download Scarlet Witch’s photo from this website:[http://weheartit.com/allsimpleannie/collections/108140702-elizabeth-olsen], actually this is a albums.">
<meta name="twitter:image" content="http://clovel.cn/images/down_1.png">
  
    <link rel="alternative" href="/atom.xml" title="Code_Cheng Site" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/photo.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Cheng Wang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">python | html5 | javascript | database | Everything I Want</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>About</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Homepage</a></li>
				        
							<li><a href="/categories/notes">Notes</a></li>
				        
							<li><a href="/categories/python">Python</a></li>
				        
							<li><a href="/categories/html">Html</a></li>
				        
							<li><a href="/archives">All Article</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/WangChengAction" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/wc1121" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/wang-cheng-19-62" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="/378716031@qq.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BeautifulSoup/" style="font-size: 13.33px;">BeautifulSoup</a> <a href="/tags/Beautifulsoup/" style="font-size: 10px;">Beautifulsoup</a> <a href="/tags/C/" style="font-size: 13.33px;">C#</a> <a href="/tags/Checkbox/" style="font-size: 10px;">Checkbox</a> <a href="/tags/Combobox/" style="font-size: 10px;">Combobox</a> <a href="/tags/Download/" style="font-size: 10px;">Download</a> <a href="/tags/Python/" style="font-size: 16.67px;">Python</a> <a href="/tags/Software-Engineering/" style="font-size: 10px;">Software Engineering</a> <a href="/tags/SqlServer/" style="font-size: 13.33px;">SqlServer</a> <a href="/tags/ToggleButton/" style="font-size: 10px;">ToggleButton</a> <a href="/tags/UWP/" style="font-size: 10px;">UWP</a> <a href="/tags/Urllib/" style="font-size: 10px;">Urllib</a> <a href="/tags/Urlretrieve/" style="font-size: 10px;">Urlretrieve</a> <a href="/tags/VSM/" style="font-size: 10px;">VSM</a> <a href="/tags/WPF/" style="font-size: 16.67px;">WPF</a> <a href="/tags/Webapp/" style="font-size: 10px;">Webapp</a> <a href="/tags/djongo/" style="font-size: 10px;">djongo</a> <a href="/tags/encoding/" style="font-size: 10px;">encoding</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/requests/" style="font-size: 13.33px;">requests</a> <a href="/tags/scraping/" style="font-size: 13.33px;">scraping</a> <a href="/tags/semantic/" style="font-size: 10px;">semantic</a> <a href="/tags/software-testing/" style="font-size: 10px;">software testing</a> <a href="/tags/sonarqube/" style="font-size: 10px;">sonarqube</a> <a href="/tags/static-analsis/" style="font-size: 10px;">static analsis</a> <a href="/tags/urllib/" style="font-size: 10px;">urllib</a> <a href="/tags/utf-8/" style="font-size: 10px;">utf-8</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/WangChengAction">我的github</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">BTH software engineering master, interested in running, coding and listening</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Cheng Wang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/photo.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Cheng Wang</h1>
			</hgroup>
			
			<p class="header-subtitle">python | html5 | javascript | database | Everything I Want</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Homepage</a></li>
		        
					<li><a href="/categories/notes">Notes</a></li>
		        
					<li><a href="/categories/python">Python</a></li>
		        
					<li><a href="/categories/html">Html</a></li>
		        
					<li><a href="/archives">All Article</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/WangChengAction" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/wc1121" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/wang-cheng-19-62" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="/378716031@qq.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="pages-Practice-2_-Download-Scarlett-Pictures-From-WeHeartit-With-Python" class="article article-type-pages" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/31/Practice-2_-Download-Scarlett-Pictures-From-WeHeartit-With-Python/" class="article-date">
  	<time datetime="2017-03-31T21:01:52.000Z" itemprop="datePublished">2017-03-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Practice2：Download Scarlet Witch&#39;s Picture From WeHeartit WebSite
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BeautifulSoup/">BeautifulSoup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Download/">Download</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Urllib/">Urllib</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Urlretrieve/">Urlretrieve</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/python/">python</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
            <div id="toc" class="toc-article">
                <strong class="toc-title">文章目录</strong>
                
            </div>
        
        <p>Today’s topic is download Scarlet Witch’s photo from this website:<br>[<a href="http://weheartit.com/allsimpleannie/collections/108140702-elizabeth-olsen]" target="_blank" rel="noopener">http://weheartit.com/allsimpleannie/collections/108140702-elizabeth-olsen]</a>, actually this is a albums.<br><img src="/images/down_1.png" alt="&#39;image1&#39;"><br><a id="more"></a><br>So, if we want to download these pictures, we need understand this method:<code>urlretrieve</code>,it’s mainly for that.<br>Before that, We need to carefully observe the site, at the bottom of the page, we will find that the site does not have the next page button, but when sliding down, it will automatically load the next page, it called the asynchronous loading mechanism, we can open the network tools, and then slide down the pages, we can see the emergence of page2,3,4 …., these are the sites we want to crawl.<br><img src="/images/down_2.png" alt="&#39;image2&#39;"><br>Ok, observation works done, we can start to scrapying:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> requests,urllib.request,time,random,json</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://weheartit.com/illuminatedangel/collections/110706595-lizzie?page='</span></span><br><span class="line"><span class="comment"># Due to headers is too long, we only show little part here.</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3)...'</span>,</span><br><span class="line">    <span class="string">'Cookie'</span>:<span class="string">'locale=zh-cn; __whiAnonymousID=1c638e0793074dc589930e2a82f2 ...'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import Proxies Pool Form https://github.com/qiyeboy/IPProxyPool</span></span><br><span class="line">r = requests.get(<span class="string">'http://127.0.0.1:8000/?types=0&amp;count=100&amp;protocol=1&amp;country=国外'</span>) </span><br><span class="line">ip_ports = json.loads(r.text) </span><br><span class="line">ips = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ip_ports:</span><br><span class="line">    proxies=&#123;<span class="string">"http"</span>: <span class="string">"http://%s:%s"</span>%(i[<span class="number">0</span>],i[<span class="number">1</span>])&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pic_address</span><span class="params">(url,data=None)</span>:</span></span><br><span class="line">    resp = requests.get(url,headers=headers,proxies=proxies,timeout=<span class="number">10</span>)</span><br><span class="line">    <span class="comment">#如果返回状态码是200，才进行爬取</span></span><br><span class="line">    <span class="keyword">if</span> resp.status_code == <span class="number">200</span>:</span><br><span class="line">        soup = BeautifulSoup(resp.text,<span class="string">'lxml'</span>)</span><br><span class="line">        images = soup.select(<span class="string">'a.js-entry-detail-link &gt; img.entry-thumbnail'</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#构建下载文件夹路径</span></span><br><span class="line">        folder_path = <span class="string">'/Users/wangcheng/Desktop/Python-Test/Picture/'</span></span><br><span class="line">        download_list = []</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> img <span class="keyword">in</span> images:</span><br><span class="line">            download_list.append(img[<span class="string">'src'</span>])</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> download_list:</span><br><span class="line"></span><br><span class="line">            <span class="comment"># urlretrieve是专门用来下载的方法</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                urllib.request.urlretrieve(item,folder_path + item[<span class="number">-24</span>:<span class="number">-16</span>] + item[<span class="number">-4</span>:])</span><br><span class="line">                print(<span class="string">'Done'</span>+str(count))</span><br><span class="line">                count = count+<span class="number">1</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                print(e)</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line"><span class="comment">#由于异步加载无法确定准确的页数，所以可以这样进行获取</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_more_pages</span><span class="params">(start,end)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start,end):</span><br><span class="line">        pic_address(url+str(i))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">get_more_pages(<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">http://weheartit.com/inspirations/taylorswift?scrolling=true&amp;page=4&amp;before=194521683</span></span><br><span class="line"><span class="string">http://weheartit.com/inspirations/taylorswift?scrolling=true&amp;page=5&amp;before=282503494</span></span><br><span class="line"><span class="string">http://weheartit.com/inspirations/taylorswift?scrolling=true&amp;page=6&amp;before=282497686</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></p>
<p>And the result is here:<br><img src="/images/down_3.png" alt="&#39;image3&#39;"></p>
<p>In this process, i encountered the website of the anti-crawling mechanism, so we need built the proxies pool, and from github, i found a good one:[<a href="https://github.com/qiyeboy/IPProxyPool]" target="_blank" rel="noopener">https://github.com/qiyeboy/IPProxyPool]</a>, It’s easy to use, thanks for the author.</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/01/Practice-3_-Scrapying-58-Web-Site-List-And-Detail/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Practice3: Scrapying 58 WebSite List And Detail
        
      </div>
    </a>
  
  
    <a href="/2017/03/27/Practice-1_-Tripadvisor-Attractions-Scapying-with-Python/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Practice1：Tripadvisor Attractions Scapying with Python</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


  
  
    <div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏"></a>
        <span class="donate_txt">
            &uarr;<br>
                    Thank you！
        </span>
        <br>
    </div>  
    <div id="donate_guide" class="donate_bar center hidden" >
            <!-- 支付宝打赏图案 -->
            <img src="/img/zhifubao.jpg" alt="支付宝打赏"> 
            <!-- 微信打赏图案 -->
            <img src="/img/weixin.jpg" alt="微信打赏">  
    </div>
    <script type="text/javascript">
        document.getElementById('btn_donate').onclick = function(){
            $('#donate_board').addClass('hidden');
            $('#donate_guide').removeClass('hidden');
        }
    </script>
</div>

  
  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Practice-2_-Download-Scarlett-Pictures-From-WeHeartit-With-Python" data-title="Practice2：Download Scarlet Witch&#39;s Picture From WeHeartit WebSite" data-url="http://clovel.cn/2017/03/31/Practice-2_-Download-Scarlett-Pictures-From-WeHeartit-With-Python/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Cheng Wang
    	</div>
        <div class="footer-center">
            <span id="busuanzi_container_site_uv">
            本站访客数<span id="busuanzi_value_site_uv"></span>人次
            </span>
            <span id="busuanzi_container_page_pv">
            本文总阅读量<span id="busuanzi_value_page_pv"></span>次
            </span>
        </div>
    </div>
  </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<div>
   <a href="javascript:;" id="totop" title="回到顶部"></a> 
</div>

<script src="/js/totop.js"></script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  </div>
</body>
</html>